{
    "name": "Odoo Development Environment",
    "dockerComposeFile": "compose.yaml",
    "service": "odoo",
    "postCreateCommand": "bash .devcontainer/post_create.sh",
    "workspaceFolder": "/work",
    "shutdownAction": "stopCompose",
    "features": {
        "ghcr.io/devcontainers/features/common-utils:2": {
            "configureZshAsDefaultShell": true
        },
        "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },
    "mounts": [
        {
            "source": "${localEnv:HOME}/.ssh",
            "target": "/home/odoo/.ssh",
            "type": "bind"
        }
    ],
    "customizations": {
        "vscode": {
            "extensions": [
                "charliermarsh.ruff",
                "dbaeumer.vscode-eslint",
                "ms-azuretools.vscode-docker",
                "ms-python.debugpy",
                "ms-python.python",
                "ms-python.vscode-pylance",
                // "odoo.odoo@prerelease", // FIXME: remove once https://github.com/odoo/odoo-ls gets stable
                "${containerWorkspaceFolder}/odoo-0.2.8.vsix",
                "odoo.owl-vision",
                "swyddfa.esbonio"
            ],
            "settings": {
                "debug.javascript.autoAttachFilter": "onlyWithFlag",
                "editor.codeActionsOnSave": {
                    "source.organizeImports": "never"
                },
                "editor.defaultFormatter": "dbaeumer.vscode-eslint",
                "editor.indentSize": "tabSize",
                "editor.tabSize": 4,
                "python.defaultInterpreterPath": "/usr/local/bin/python3",
                "ruff.lint.args": [
                    "--select",
                    "ALL",
                    "--preview",
                    "--ignore",
                    "ANN,B,C901,COM812,D,E501,E741,EM101,ERA001,FBT,I001,N,PD,PERF,PIE790,PLR,PT,Q,RET502,RET503,RSE102,RUF001,RUF012,S,SIM102,SIM108,SLF001,TID252,UP031,TRY002,TRY003,TRY300,UP038,E713,SIM117,PGH003,RUF005,RET,DTZ,FIX,TD,ARG,TRY400,B904,C408,PLW2901,PTH,EM102,INP001,CPY001,UP006,UP007,E266,PIE808,PLC2701,FURB101,RUF021,FURB118,FA100,FA102"
                ],
                "ruff.nativeServer": "off",
                "search.useIgnoreFiles": false,
                "search.useGlobalIgnoreFiles": false,
                "terminal.integrated.defaultProfile.linux": "zsh",
                "files.exclude": {
                    "**/.git": true,
                    "**/.svn": true,
                    "**/.hg": true,
                    "**/CVS": true,
                    "**/.DS_Store": true,
                    "**/Thumbs.db": true,
                    "**/node_modules": true,
                    "**/.ruff_cache": true
                },
                "git.autoRepositoryDetection": true,
                "git.scanRepositories": [
                    "src/community",
                    "src/enterprise"
                ],
                "python.analysis.extraPaths": [
                    "src/community",
                    "src/extra-addons/runbot/mergebot_test_utils"
                ],
                // FIXME the following setting has an application scope and can be set only in the user settings file.
                "Odoo.configurations": {
                    "0": {
                        "id": 0,
                        "name": "Odoo LS",
                        "odooPath": "${workspaceFolder}/src/community",
                        "rawOdooPath": "${workspaceFolder}/src/community",
                        "addons": [
                            "${workspaceFolder}/src/enterprise",
                            "${workspaceFolder}/src/extra-addons/design-themes",
                            "${workspaceFolder}/src/extra-addons/industry",
                            "${workspaceFolder}/src/extra-addons/industry/tests",
                            "${workspaceFolder}/src/extra-addons/runbot"
                        ],
                        "pythonPath": "python3"
                    }
                }
            }
        }
    }
}
